{% extends "base.html" %}
{% block content %}
<h2>Renovar suscripción</h2>
<p>
  Cliente: <strong>{{ sub.client.name }}</strong><br>
  Servicio: <strong>{{ sub.account.service }}</strong><br>
  Vencimiento actual: {{ sub.end_date.strftime('%d/%m/%Y') }}
</p>

<form method="post" class="mt-3">
  <div class="mb-3">
    <label class="form-label">Nueva fecha de inicio</label>
    <input type="date" name="start_date" class="form-control"
           value="{{ suggested_start.strftime('%Y-%m-%d') }}" required>
  </div>

  <div class="mb-3">
    <label class="form-label">Días de suscripción</label>
    <input type="number" name="days" class="form-control"
           value="{{ default_days }}" required>
  </div>

  <div class="mb-3">
    <label class="form-label">Precio</label>
    <input type="number" step="0.01" name="price" class="form-control"
           value="{{ '%.2f'|format(sub.price) }}" required>
  </div>

  <div class="mb-3">
    <label class="form-label">Estado de pago</label>
    <select name="payment_status" class="form-select">
      {% for code, label in pay_statuses %}
        <option value="{{ code }}"
                {% if code == 'pagado' %}selected{% endif %}>
          {{ label }}
        </option>
      {% endfor %}
    </select>
  </div>

  <button type="submit" class="btn btn-success">Confirmar renovación</button>
  <a href="{{ url_for('ventas') }}" class="btn btn-secondary">Cancelar</a>
{% endblock %}
