{% extends "base.html" %}
{% block content %}
<h2>Nueva cuenta streaming</h2>
<form method="post" class="mt-3">
  <div class="mb-3">
    <label class="form-label">Servicio (Netflix, Disney+...)</label>
    <input type="text" id="service_input" name="service" class="form-control" required>
    <small class="text-muted">Ejemplo: Netflix, Disney+, Max, Prime Video…</small>
  </div>
  <div class="mb-3">
    <label class="form-label">Usuario / Correo</label>
    <input type="text" name="user" class="form-control" required>
  </div>
  <div class="mb-3">
    <label class="form-label">Contraseña</label>
    <input type="text" name="password" class="form-control" required>
  </div>
  <div class="mb-3">
    <label class="form-label">Descripción / Tipo</label>
    <input type="text" name="profile" class="form-control" placeholder="Cuenta UHD, 4K, etc.">
  </div>

  <div class="mb-3">
    <label class="form-label">Perfiles / Slots disponibles en esta cuenta</label>
    <input type="number" id="total_slots_input" name="total_slots" class="form-control" value="1" min="1">
    <small class="text-muted">
      Ejemplo: Netflix = 5, Disney+ = 6. Puedes ajustarlo según el tipo de cuenta.
    </small>
  </div>

  <div class="mb-3">
    <label class="form-label">Notas</label>
    <textarea name="notes" class="form-control" rows="3"></textarea>
  </div>
  <button type="submit" class="btn btn-success">Guardar</button>
</form>

<script>
document.addEventListener('DOMContentLoaded', function () {
  const serviceInput = document.getElementById('service_input');
  const slotsInput = document.getElementById('total_slots_input');

  function sugerirSlots() {
    const s = (serviceInput.value || '').toLowerCase();
    if (s.includes('netflix')) {
      slotsInput.value = 5;
    } else if (s.includes('disney')) {
      slotsInput.value = 6;
    } else if (s.includes('max')) {
      slotsInput.value = 5;
    } else if (s.includes('prime')) {
      slotsInput.value = 3;
    }
  }

  serviceInput.addEventListener('input', sugerirSlots);
});
</script>
{% endblock %}
